#include <Drivers/PS2KEYBOARD.H>
#include <Drivers/VBE.H>

#include <Lib/TERMINAL.H>

static char key_chars[] = {
	'\0','\0','1','2','3','4','5','6','7','8','9','0','-','=','\b',' ',
	'q','w','e','r','t','y','u','i','o','p','[',']','\n','\0',
	'a','s','d','f','g','h','j','k','l',';','\'','`','\0','\\',
	'z','x','c','v','b','n','m',',','.','/','\0','\0','\0',' ','\0',
	'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','-',
	'\0','\0','\0','+','\0','\0','\0','\0','\b','/','\n','\0','\0','\0','\b','\0','\0'
	,'\0','\0','\0','\0','\0','\0','\0','\0','\0'
};

void KeyboardHandler(u8 key) {
	if (key & 0x80) return;

	char c = key_chars[key];

	if (c == '\n')
		Enter();
	else {
		char s[2] = {c, '\0'};
		Print(s);
	}
}
